@{
    ViewBag.Title = "#ltnet - All development news, links and posts on the single page";
    Layout = "../Shared/_Layout.cshtml";
}
<div id="container" class="container" style="margin-top: 50px">
</div>
@{ Html.RenderPartial("Templates"); }
<script type="text/javascript">
    var apiUrl = '@System.Configuration.ConfigurationManager.AppSettings["api.url"]';

    function render(items) {
        var result = {};
        result.Items = items;
        $("#container").html($("#containerTemplate").render(result));
    };

    View.setRendering(render);
    View.bindMenuClick(render);
    View.bindLoadMore(apiUrl, render);

    Stream.get(Api.getUrl(apiUrl), function (items) {
        Model.Items = items;
        View.setActiveMenu(View.getActiveItem());
        $(window).trigger("hashchange");
    });
    
//    (function loop() {
//        Items.load($("#container"));
//        window.setTimeout(loop, 60000);
//    })();
</script>
